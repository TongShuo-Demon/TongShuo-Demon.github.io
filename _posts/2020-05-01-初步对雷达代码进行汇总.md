---
title: 初步对RM雷达的代码进行汇总
description: 将相机置于己方高地三米处对基地附近所有车辆进行检测，得到身份ID，此版本的代码没有设计到通信部分，主要因为官方至今没有给出详细说明。
categories:
 - RM
tags:
---



## 背景

首先，雷达属于今年新添加的内容，所以导致很多目的一直不是很明确，只能确定先做目标检测,我从一开始一直想要做出来全局检测，所以我采用了运动物体检测的方法、深度学习的yolo方法，正如我之前总结的两篇博客。但是从官方的[圆桌会议](https://bbs.robomaster.com/forum.php?mod=viewthread&tid=10188)提出新的解决方案后。主要两种方案，一种就是只检测基地附件车辆，一种是采用双目相机进行全局预测飞镖的位置（我之前使用过单目相机预测车辆的全局位置，但是只有二维坐标，不能得到三维坐标）。

## 整体思路

机甲大师对抗赛中，单目相机悬挂于我方基地上面3m的位置，朝向己方基地和哨兵附近，可以利用该相机获取基地和哨兵附近敌我双方的机器人的颜色，ID，后期将接入裁判系统数据中的血量信息，一方面，输入到操作间，为操作手提供决策辅助，另一方面，也可以为己方哨兵提供策略。

![undefined](http://ww1.sinaimg.cn/large/006lMPXUgy1ged1ex7j1jj30uw0hgdgx.jpg)

代码的逻辑框图如下所示

![undefined](http://ww1.sinaimg.cn/large/006lMPXUgy1ged1j1naphj30k90ex0su.jpg)

 最终基站在检测到基地附近敌我分布之后能够通过裁判系统得到所有机器人的信息，并生成威胁系数：比如首先集火血量低的车辆；识别友军集火目标辅助攻击；根据当前局势选择攻防策略；通过远距离预警补充哨兵视野；分析敌方行为动向等。

## 相机选型

实验室所使用的工业相机是大华相机，镜头是6mm,关于工业相机的具体知识可以参考我之前的一篇博客。

## 目标检测

目标检测还是采用传统的opencv方法，提取出所有运动物体，判断颜色，然后找出所有灯条，找出匹配灯条，找出装甲板，识别数字，判断出车的ID。在采集数据集时候，应当通过相机在3m处对车辆上的数字采集。

代码以及注释参考工程文件。

## 目标追踪

采用多目标的追踪方法

## 目标融合

一帧图片检测目标，如果检测到目标了，对后续n帧图片进行目标追踪。







## 谷歌代码规范

**类**：使用大写开头的驼峰 `UpperCamelCase`。

**函数命名**:但是采用驼峰写法，首字母小写，后续的单词大写，中间不能有下划线，

**变量命名**: 都只能使用小写，单词与单词之间使用下划线间隔。类成员变量使用下划线结尾，函数的局部变量则不用下划线结尾；对于全局变量，在开头加上"g_"，后续与前同；

**常量**：常量写成 `CONSTANT_CASE`：所有字母使用大写，以下划线分隔单词。

**非常量字段**（静态或其他）：使用小写开头的驼峰，如果是私有的私有的则以下划线结尾。